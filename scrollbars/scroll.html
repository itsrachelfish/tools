<!--

Somehow detect the size of the browser's scrollbar
Add padding based on that amount?
We don't want content to be potentially cut off

-->

<style>
    body {
        background-color: #000;
    }
    
    .scroll-outer {
        overflow: hidden;
        width: 300px;
        height: 300px;
        position: relative;
    }

    .scroll-inner {
        background-color: #fff;
        width: 315px;
        height: 300px;
        overflow: hidden;
        overflow-y: scroll;
    }

    .scrollbar {
        position: absolute;
        right: 0;
        width: 15px;
        border: 1px solid blue;
    }
    
</style>


<div class="scroll-outer">
    <div class="scrollbar">
        
    </div>

    <div class="scroll-inner">
        <div class="scroll-content">
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
            A box with a lot of content! <br>
        </div>
    </div>
</div>

<div class="scroll-box">

</div>    

<script>

function $(selector)
{
    return document.querySelectorAll(selector);
}

// By George, from stack overflow: http://stackoverflow.com/questions/16537804/how-to-find-real-div-height/16538582#16538582
function outerHeight(elem)
{
    var curStyle = elem.currentStyle || window.getComputedStyle(elem);
    height = elem.offsetHeight;
    height += parseInt(curStyle.marginTop);
    height += parseInt(curStyle.marginBottom);
    
    return height;
}

function updateScrollbar()
{
    var scrollHeight = outerHeight($('.scroll-inner')[0]);
    var contentHeight = outerHeight($('.scroll-content')[0]);
    var barHeight = scrollHeight / contentHeight * 100;
    var barPosition = $('.scroll-inner')[0].scrollTop / contentHeight * 100;
    
    $('.scrollbar')[0].style.height = barHeight + "%";
    $('.scrollbar')[0].style.top = barPosition + "%";
}

updateScrollbar();


</script>
